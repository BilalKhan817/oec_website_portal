<div class="board-directors-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <div class="title-section">
        <h1 class="page-title">
          <mat-icon class="title-icon">groups</mat-icon>
          Board of Directors
        </h1>
        <p class="page-subtitle">Manage board members and their information</p>
      </div>
      
      <div class="header-actions">
        <button 
          mat-raised-button 
          color="primary" 
          (click)="openAddModal()"
          class="add-button">
          <mat-icon>person_add</mat-icon>
          Add Board Member
        </button>
        
        <button 
          mat-icon-button 
          (click)="refreshData()"
          class="refresh-button"
          [disabled]="isLoading">
          <mat-icon>refresh</mat-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- Search and Filter Section -->
  <div class="search-section">
    <mat-form-field appearance="outline" class="search-field">
      <mat-label>Search board members</mat-label>
      <input 
        matInput 
        [(ngModel)]="searchTerm"
        (input)="applyFilter($event)"
        placeholder="Search by name, designation, or representing...">
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading board members...</p>
  </div>

  <!-- Content Section -->
  <div class="content-section" *ngIf="!isLoading">
    <!-- Empty State -->
    <div class="empty-state" *ngIf="filteredBoardMembers.length === 0">
      <mat-icon class="empty-icon">groups</mat-icon>
      <h3>No board members found</h3>
      <p *ngIf="searchTerm">
        No board members match your search criteria. 
        <a (click)="searchTerm = ''; applyFilter($event)" class="clear-search">Clear search</a>
      </p>
      <p *ngIf="!searchTerm">
        Get started by adding your first board member.
      </p>
      <button 
        mat-raised-button 
        color="primary" 
        (click)="openAddModal()"
        class="empty-add-button">
        <mat-icon>person_add</mat-icon>
        Add Board Member
      </button>
    </div>

    <!-- Board Members Table -->
    <div class="board-members-table" *ngIf="filteredBoardMembers.length > 0">
      <table mat-table [dataSource]="filteredBoardMembers" class="mat-elevation-z8">
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let member">{{member.name}}</td>
        </ng-container>

        <!-- Designation Column -->
        <ng-container matColumnDef="designation">
          <th mat-header-cell *matHeaderCellDef>Designation</th>
          <td mat-cell *matCellDef="let member">{{member.designation}}</td>
        </ng-container>

        <!-- Representing Column -->
        <ng-container matColumnDef="representing">
          <th mat-header-cell *matHeaderCellDef>Representing</th>
          <td mat-cell *matCellDef="let member">{{member.representing}}</td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let member">
            <button 
              mat-icon-button 
              color="primary"
              (click)="openEditModal(member)"
              class="edit-button"
              matTooltip="Edit board member">
              <mat-icon>edit</mat-icon>
            </button>
            
            <button 
              mat-icon-button 
              color="warn"
              (click)="deleteBoardMember(member)"
              class="delete-button"
              matTooltip="Delete board member">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

    <!-- Results Count -->
    <div class="results-info" *ngIf="filteredBoardMembers.length > 0">
      <p class="results-count">
        Showing {{filteredBoardMembers.length}} of {{boardMembers.length}} board members
        <span *ngIf="searchTerm"> (filtered)</span>
      </p>
    </div>
  </div>

  <!-- Modal for Add/Edit -->
  <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{isEditMode ? 'Edit' : 'Add'}} Board Member</h2>
        <button mat-icon-button (click)="closeModal()" class="close-button">
          <mat-icon>close</mat-icon>
        </button>
      </div>
      
      <form [formGroup]="boardMemberForm" class="modal-form">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" placeholder="Enter board member's name">
          <mat-error *ngIf="boardMemberForm.get('name')?.hasError('required')">
            Name is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Designation</mat-label>
          <input matInput formControlName="designation" placeholder="Enter designation">
          <mat-error *ngIf="boardMemberForm.get('designation')?.hasError('required')">
            Designation is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Representing</mat-label>
          <input matInput formControlName="representing" placeholder="Enter representing organization">
          <mat-error *ngIf="boardMemberForm.get('representing')?.hasError('required')">
            Representing is required
          </mat-error>
        </mat-form-field>

        <div class="modal-actions">
          <button mat-button (click)="closeModal()" class="cancel-button">
            Cancel
          </button>
          <button 
            mat-raised-button 
            color="primary" 
            (click)="saveBoardMember()"
            [disabled]="boardMemberForm.invalid"
            class="save-button">
            {{isEditMode ? 'Update' : 'Add'}} Board Member
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
