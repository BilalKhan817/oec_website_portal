<div class="contact-us-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <div class="title-section">
        <h1 class="page-title">
          <mat-icon class="title-icon">contact_mail</mat-icon>
          Contact Us Content Management
        </h1>
        <p class="page-subtitle">Manage all content for the Contact Us page</p>
      </div>

      <div class="header-actions">
        <button
          mat-raised-button
          color="primary"
          (click)="saveContent()"
          [disabled]="isSaving || contentForm.invalid"
          class="save-button">
          <mat-icon>save</mat-icon>
          {{ isEditMode ? 'Update Content' : 'Create Content' }}
        </button>

        <button
          mat-icon-button
          (click)="refreshData()"
          class="refresh-button"
          [disabled]="isLoading">
          <mat-icon>refresh</mat-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading content...</p>
  </div>

  <!-- Content Form -->
  <div class="content-form" *ngIf="!isLoading">
    <form [formGroup]="contentForm">

      <!-- Page Title -->
      <mat-card class="form-section">
        <mat-card-header>
          <mat-card-title>Page Header</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field class="full-width">
            <mat-label>Page Title</mat-label>
            <input matInput formControlName="page_title" placeholder="Get in Touch with OEC">
          </mat-form-field>
        </mat-card-content>
      </mat-card>

      <!-- Headquarters Section -->
      <mat-card class="form-section">
        <mat-card-header>
          <mat-card-title>Headquarters Section</mat-card-title>
        </mat-card-header>
        <mat-card-content formGroupName="headquarters_section">
          <div class="form-row two-columns">
            <mat-form-field>
              <mat-label>Section Title</mat-label>
              <input matInput formControlName="title">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Icon</mat-label>
              <mat-select formControlName="icon">
                <mat-option *ngFor="let icon of sectionIcons" [value]="icon.value">
                  {{ icon.label }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <mat-form-field class="full-width">
            <mat-label>Address</mat-label>
            <textarea matInput formControlName="address" rows="2"></textarea>
          </mat-form-field>

          <div class="form-row two-columns">
            <mat-form-field>
              <mat-label>Phone</mat-label>
              <input matInput formControlName="phone" placeholder="(051) 9108402">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Email</mat-label>
              <input matInput formControlName="email" placeholder="admin@oec.gov.pk">
            </mat-form-field>
          </div>

          <div class="form-row two-columns">
            <mat-form-field>
              <mat-label>Latitude</mat-label>
              <input matInput formControlName="latitude" type="number" step="0.0001" placeholder="33.6844">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Longitude</mat-label>
              <input matInput formControlName="longitude" type="number" step="0.0001" placeholder="73.0479">
            </mat-form-field>
          </div>

          <button mat-raised-button color="accent" type="button" (click)="updateMapLocation('headquarters')" style="margin-bottom: 16px;">
            <mat-icon>map</mat-icon>
            Update Map Location
          </button>

          <div id="hq-map" class="map-container"></div>
        </mat-card-content>
      </mat-card>

      <!-- Regional Offices Section -->
      <mat-card class="form-section">
        <mat-card-header>
          <mat-card-title>Regional Offices Section</mat-card-title>
        </mat-card-header>
        <mat-card-content formGroupName="regional_offices_section">
          <div class="form-row two-columns">
            <mat-form-field>
              <mat-label>Section Title</mat-label>
              <input matInput formControlName="title">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Icon</mat-label>
              <mat-select formControlName="icon">
                <mat-option *ngFor="let icon of sectionIcons" [value]="icon.value">
                  {{ icon.label }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <h4>Regional Offices</h4>
          <div formArrayName="offices">
            <div *ngFor="let office of regionalOffices.controls; let i = index" [formGroupName]="i"
                 class="support-card-group">
              <h5>Office {{ i + 1 }}</h5>

              <mat-form-field class="full-width">
                <mat-label>City</mat-label>
                <input matInput formControlName="city" placeholder="Karachi">
              </mat-form-field>

              <mat-form-field class="full-width">
                <mat-label>Address</mat-label>
                <textarea matInput formControlName="address" rows="2"></textarea>
              </mat-form-field>

              <div class="form-row two-columns">
                <mat-form-field>
                  <mat-label>Phone</mat-label>
                  <input matInput formControlName="phone" placeholder="(021) 99332980">
                </mat-form-field>

                <mat-form-field>
                  <mat-label>Email</mat-label>
                  <input matInput formControlName="email" placeholder="admin@oec.gov.pk">
                </mat-form-field>
              </div>

              <div class="form-row two-columns">
                <mat-form-field>
                  <mat-label>Latitude</mat-label>
                  <input matInput formControlName="latitude" type="number" step="0.0001" placeholder="33.6844">
                </mat-form-field>

                <mat-form-field>
                  <mat-label>Longitude</mat-label>
                  <input matInput formControlName="longitude" type="number" step="0.0001" placeholder="73.0479">
                </mat-form-field>
              </div>

              <button mat-raised-button color="accent" type="button" (click)="updateMapLocation('regional', i)" style="margin-bottom: 16px;">
                <mat-icon>map</mat-icon>
                Update Map Location
              </button>

              <div [id]="'regional-office-map-' + i" class="map-container"></div>

              <button mat-stroked-button color="warn" type="button" (click)="removeRegionalOffice(i)" style="margin-top: 16px;">
                <mat-icon>delete</mat-icon>
                Remove Office
              </button>
            </div>
          </div>

          <button mat-raised-button color="primary" type="button" (click)="addRegionalOffice()">
            <mat-icon>add</mat-icon>
            Add Regional Office
          </button>
        </mat-card-content>
      </mat-card>

      <!-- OEC Travel Office Section -->
      <mat-card class="form-section">
        <mat-card-header>
          <mat-card-title>OEC Travel Office Section</mat-card-title>
        </mat-card-header>
        <mat-card-content formGroupName="travel_office_section">
          <div class="form-row two-columns">
            <mat-form-field>
              <mat-label>Section Title</mat-label>
              <input matInput formControlName="title">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Icon</mat-label>
              <mat-select formControlName="icon">
                <mat-option *ngFor="let icon of sectionIcons" [value]="icon.value">
                  {{ icon.label }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <mat-form-field class="full-width">
            <mat-label>Address</mat-label>
            <textarea matInput formControlName="address" rows="2"></textarea>
          </mat-form-field>

          <mat-form-field class="full-width">
            <mat-label>Phone</mat-label>
            <input matInput formControlName="phone" placeholder="(051) 9219092">
          </mat-form-field>

          <div class="form-row two-columns">
            <mat-form-field>
              <mat-label>Latitude</mat-label>
              <input matInput formControlName="latitude" type="number" step="0.0001" placeholder="33.6844">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Longitude</mat-label>
              <input matInput formControlName="longitude" type="number" step="0.0001" placeholder="73.0479">
            </mat-form-field>
          </div>

          <button mat-raised-button color="accent" type="button" (click)="updateMapLocation('travel')" style="margin-bottom: 16px;">
            <mat-icon>map</mat-icon>
            Update Map Location
          </button>

          <div id="travel-office-map" class="map-container"></div>
        </mat-card-content>
      </mat-card>

      <!-- Feedback Section -->
      <mat-card class="form-section">
        <mat-card-header>
          <mat-card-title>Feedback Section</mat-card-title>
        </mat-card-header>
        <mat-card-content formGroupName="feedback_section">
          <div class="form-row two-columns">
            <mat-form-field>
              <mat-label>Section Title</mat-label>
              <input matInput formControlName="title">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Icon</mat-label>
              <mat-select formControlName="icon">
                <mat-option *ngFor="let icon of sectionIcons" [value]="icon.value">
                  {{ icon.label }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <mat-form-field class="full-width">
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="description" rows="3"></textarea>
          </mat-form-field>
        </mat-card-content>
      </mat-card>

    </form>
  </div>
</div>
